<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical History</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header>
        <a href="home.html"><h1>Booking History</h1></a>
    </header>

    <div class="container">
        <h2>Past Appointments</h2>
        <ul id="appointment-list">
            <!-- The list of past appointments will be dynamically generated by JavaScript -->
        </ul>
    </div>

    <footer>
        <p>Â© 2024 Campus Clinic</p>
    </footer>

    <script>
        // Function to display the appointments sorted by doctor's name, then by date and time
        function displayAppointments() {
            const appointments = JSON.parse(localStorage.getItem('appointments')) || [];
            const appointmentList = document.getElementById('appointment-list');

            // Sort appointments by doctor's name first, then by date and time
            appointments.sort((a, b) => {
                // Sort by doctor's name
                const doctorComparison = a.doctor.localeCompare(b.doctor);
                
                // If doctors are the same, compare by date and time
                if (doctorComparison === 0) {
                    const dateA = new Date(a.date + 'T' + a.time);
                    const dateB = new Date(b.date + 'T' + b.time);
                    return dateA - dateB;  // Sort by date and time in ascending order
                }
                
                return doctorComparison;  // Sort by doctor's name in ascending order
            });

            // Clear previous list
            appointmentList.innerHTML = '';

            // Add each appointment to the list
            appointments.forEach((appointment) => {
                const listItem = document.createElement('li');
                listItem.textContent = `Student Number: ${appointment.studentNumber}, Date: ${appointment.date}, Time: ${appointment.time}, Doctor: ${appointment.doctor}`;
                appointmentList.appendChild(listItem);
            });
        }

        // Display appointments on page load
        window.onload = displayAppointments;
    </script>
</body>
</html>
